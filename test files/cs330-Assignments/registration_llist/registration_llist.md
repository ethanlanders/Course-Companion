Title: Course Registration (Linked List)
Author: Thomas J. Kennedy
TOC: yes

%define <\printTTZ> <ex> {330}

Read these [general instructions on turning in assignments](doc:submitting)
 for this course. Take another look at [sections 4.1 & 4.2 of the syllabus](doc:syllabus#expectations)

# Design and S.O.L.I.D

The code in this assignment violates a number of best practices...

  1. S.O.L.I.D
  2. D.R.Y
  3. Abuse of inline functions
  4. No use of Constructor Delegation in `Schedule`
  5. *Data Structure Logic* is merged with *Business Logic*

However, we have to start somewhere. These terms and best practices will be
discussed starting in Review 02. *The next Assignment will be a lot more fun!*

---

# The Problem

This assignment deals with students selecting courses to add to their
schedules. You will implement the logic to add the courses to a Schedule
(`Schedule.h` and `Schedule.cpp`).  This will involve writing the code to add
Courses to a Linked List, writing a display function, and implementing the
Big-3.

*Note that I provide you my compiled solution.* All output generated by your
implementation must exactly match the output generated by my compiled solution.
You will need to practice your head-to-head testing skills from CS 250 (or CS
333).


## Input

The program reads data from two files, _students-0x.txt_ and _requests-0x.txt_.
File extensions on Linux may be arbitrary--i.e., this file could have been
named with _.dat_ as the extension.

The first file, *students-0x.txt*, lists names of students--e.g.,

    Jon Snow
    John Smith
    Bob Jones
    David Jones
    Tommy Oliver
    Tom Smith

You may assume a valid input file--i.e., that no two students share a name.

The second file, *requests-0x.txt*, contains a list of enrollment requests--e.g.,

```
Jon Snow; CS\printTTZ{} 12345 3
Jon Snow; CS\printTTZ{} 12345 3
Jon Snow; CS300 34567 3
John Smith; CS355 45678 3
John Smith; CS\printTTZ{} 12345 3
John Smith; CS\printTTZ{} 23456 3
John Smith; CS300 34567 3
Bob Jones; CS300 34567 3
Bob Jones; CS355 45678 3
Bob Jones; CS\printTTZ{} 12345 3
Bob Jones; CS300 34567 3
Bob Jones; CS361 34569 3
Bob Jones; IT310 78192 3
Bob Jones; Stat330 78195 3
David Jones; CS\printTTZ{} 12345 3
Tom Smith; CS\printTTZ{} 12345 3
Tommy Oliver; CS665 56789 3
```

## Output

The output consists of three reports written to standard output,
one after the other.

1. A report listing of all student names.

2. A report listing of all enrollment requests.

3. Finally, a detailed report is printed, listing data for each student:
    * Name
    * Schedule
    * Total Credit hours

If the program is run with the _students-01.txt_ and _requests-01.txt_ as input,
the following output should be generated:

```
Student List
------------------------------------------
 Jon Snow
 John Smith
 Bob Jones
 David Jones
 Tommy Oliver
 Tom Smith

Enrollment Request Log
------------------------------------------
Jon Snow WAS enrolled in CS\printTTZ{}
Jon Snow WAS NOT enrolled in CS\printTTZ{}
Jon Snow WAS enrolled in CS300
John Smith WAS enrolled in CS355
John Smith WAS enrolled in CS\printTTZ{}
John Smith WAS NOT enrolled in CS\printTTZ{}
John Smith WAS enrolled in CS300
Bob Jones WAS enrolled in CS300
Bob Jones WAS enrolled in CS355
Bob Jones WAS enrolled in CS\printTTZ{}
Bob Jones WAS NOT enrolled in CS300
Bob Jones WAS enrolled in CS361
Bob Jones WAS NOT enrolled in IT310
Bob Jones WAS NOT enrolled in Stat330
David Jones WAS enrolled in CS\printTTZ{}
Tom Smith WAS enrolled in CS\printTTZ{}
Tommy Oliver WAS enrolled in CS665

Student Schedule Report
------------------------------------------
 Jon Snow
  (6 Total Credits)
  - 3 credits - CS\printTTZ{} (CRN 12345)
  - 3 credits - CS300 (CRN 34567)

 John Smith
  (9 Total Credits)
  - 3 credits - CS355 (CRN 45678)
  - 3 credits - CS\printTTZ{} (CRN 12345)
  - 3 credits - CS300 (CRN 34567)

 Bob Jones
  (12 Total Credits)
  - 3 credits - CS300 (CRN 34567)
  - 3 credits - CS355 (CRN 45678)
  - 3 credits - CS\printTTZ{} (CRN 12345)
  - 3 credits - CS361 (CRN 34569)

 David Jones
  (3 Total Credits)
  - 3 credits - CS\printTTZ{} (CRN 12345)

 Tommy Oliver
  (3 Total Credits)
  - 3 credits - CS665 (CRN 56789)

 Tom Smith
  (3 Total Credits)
  - 3 credits - CS\printTTZ{} (CRN 12345)


```

The easiest way to see generate the expected output is to run the sample
executable solution I have provided. The input file and inventory size are
named as command-line parameters when the program is executed.

For example, if the sample data above is kept in items-01.txt, to run this
program, type:

```sh
./register students-01.txt requests-01.txt
```

Once you have completed your solution, compare the output generated by your
solution to the output generated by my solution. The two sets must be
identical.

(On a Windows system, you would omit the "./". If you are running from
Code::Blocks or a similar development environment, you may need to review how
to
[supply command-line parameters](https://www.cs.odu.edu/~zeil/cs333/latest/Public/supplyingInputsLab/)
to a running program.) Note that Eclipse provides the option to configure
command line arguments.


# Your Tasks

**I have decided to set up the code so that it will not compile until you
define the remaining 2 of the Big-3 in Schedule.cpp (I gave you a hint with the
Assignment Operator)**

One of the most important skills in our craft is interpreting error messages.
Remember the ones you receive when you attempt to compile the unmodified code.
**These messages will disappear once you implement the Big-3 (or until you
introduce stub-functions as placeholders).**

The key abstractions employed in this program are *Course*, *Student*, and
*Schedule*. Complete ADT implementations have been provided for the former two.
A partial implementation has been provided for the *Schedule*. Your task is to
finish the Schedule ADT.

The key data structure within the Schedule ADT is a linked list. You must not
change this choice of data structure. Any submissions that have altered the
data structure--e.g., changed to a vector--will be assigned a zero by the
instructor. You will modify only _Schedule.cpp_.

**You must start by implementing two functions:**

  1. Copy Constructor
  2. Destructor

In previous versions of this assignment, I had students implement
a single monolithic `add` method. This time, I have implemented the `Schedule::add` method
as a sequence of 3 function calls. Part of your task is to implement these three methods.

  1. Implement `Schedule::appendNoCheck`. This method takes a course, creates a
     `Node`, and adds the new `Node` to the Schedule Linked List. It performs
no Schedule checks.

  1. Implement `Schedule::wouldViolateCreditLimit`. If `course` along with the
     existing courses would exceed 12 hours, return true. Return false
otherwise.

  1. Implement `Schedule::alreadyInSchedule`. Traverse the list of courses. If
     `course` matches an course already present in the schedule return true.
    Return false otherwise.

  2. **Note - I gave this to you by _accident_. You get this function for
     free.** Implement `Schedule::display`. This must generate the Inventory
    summary. If using the sample data listed above:

    ```
    ./register students-01.txt requests-01.txt
    ```

    your display function should generate--for Jon Snow:

    ```
     Jon Snow
      (6 Total Credits)
      - 3 credits - CS\printTTZ{} (CRN 12345)
      - 3 credits - CS300 (CRN 34567)
    ```
    and--for Bob Jones:

    ```
     Bob Jones
      (12 Total Credits)
      - 3 credits - CS300 (CRN 34567)
      - 3 credits - CS355 (CRN 45678)
      - 3 credits - CS\printTTZ{} (CRN 12345)
      - 3 credits - CS361 (CRN 34569)
    ```

    **Note there is no formatting applied with `setw`.
    All spacing consists of hard-coded spaces.**

    **hint** Pay close attention to the `Course` class. **hint**

4. Employ your **Head-to-Head Testing Skills** from CS 250.


# Mechanics

## Checking for Memory Leaks

As an aid to getting this program working correctly, the program
has been instrumented with the compiler flag `-fsanitize=leak` detect memory
leaks and other (selected) memory allocation problems.
To see the memory usage report, compile your code on one of our Linux servers using the provided `makefile
Then run your program as described above.

If your output is followed by something similiar to

```
==32194==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 96 byte(s) in 3 object(s) allocated from:
    #0 0x7f92839b59f8 in operator new(unsigned long) (/usr/lib/x86_64-linux-gnu/liblsan.so.0+0xf9f8)
    #1 0x406215 in Inventory::addItemStackNoCheck(ItemStack) /home/tkennedy/not/real/inventory_llist/Solution/Inventory.cpp:131
    #2 0x402370 in Inventory::addItems(ItemStack) (/home/tkennedy/not/real/inventory_llist/Solution/storage+0x402370)
    #3 0x401dc2 in parseInventoryFile(std::istream&, std::vector<Item, std::allocator<Item> > const&) /home/tkennedy/not/real/inventory_llist/Solution/storage.cpp:165
    #4 0x401913 in main /home/tkennedy/not/real/inventory_llist/Solution/storage.cpp:90
    #5 0x7f92830d0f44 in __libc_start_main (/lib/x86_64-linux-gnu/libc.so.6+0x21f44)

Direct leak of 96 byte(s) in 3 object(s) allocated from:
    #0 0x7f92839b59f8 in operator new(unsigned long) (/usr/lib/x86_64-linux-gnu/liblsan.so.0+0xf9f8)
    #1 0x406215 in Inventory::addItemStackNoCheck(ItemStack) /home/tkennedy/not/real/inventory_llist/Solution/Inventory.cpp:131
    #2 0x405fb4 in Inventory::Inventory(Inventory const&) /home/tkennedy/not/real/inventory_llist/Solution/Inventory.cpp:52
    #3 0x40208b in printInventories(std::vector<Inventory, std::allocator<Inventory> > const&) /home/tkennedy/not/real/inventory_llist/Solution/storage.cpp:198
    #4 0x401968 in main /home/tkennedy/not/real/inventory_llist/Solution/storage.cpp:94
    #5 0x7f92830d0f44 in __libc_start_main (/lib/x86_64-linux-gnu/libc.so.6+0x21f44)

```

you have a memory leak. Follow the steps I followed in [Review-01 Example
4](https://github.com/cstkennedy/cs330-examples).

If you see only the normal output (i.e., the 3 reports described previously),
you have no memory leaks.


# Files

Files for this assignment appear in [this directory](./Public/) or, if you are
logged in to a CS Dept Linux server, in
`~tkennedy/Assignments/cs330/registration_llist`.


# Grading

Grading for this assignment will be as follows:

* Submitting code that compiles and links properly: 10%

* Program produces correct report output (exact match to my solution):
  45%. _Note that I am forcing you to practice your head-to-head testing
  from CS 250. You have my compiled solution, and input._

* Program produces correct report output with no reported memory leaks or
other error messages: 45%

In the grade report that you receive, you will see tests numbered 000,
001, 002, etc. These tests are divided into groups of three--e.g., 000, 001, 002.

1. The first test in each group evaluates your output based on
   content--including blank lines.
2. The second test in each group evaluates the formatting of your output.
3. The third test in each group checks for memory leaks. **Hint:**
   did you implement the Big-3?


## Test Cases (Pseudo-Black Box Testing)

The first group of three tests (000-002) evaluates your code for the case where
all students stay under the credit limit and add distinct (non-duplicate)
courses

The second group of three tests (003-005) evaluates your code for the case
where a student attempts to add one or more duplicate courses.

The third group of three tests (006-008) evaluates your code for the case where
a student attempts to exceed the credit limit.


## Am I a Harsh Grader?

Is this grading harsh? Yes, but this is an assignment I would potentially give
at the end of CS 250. The only extension is the inclusion of the Big-3 and a
heavier focus on abstraction. All the Linked List mechanics were covered in CS
250.

This is the time to review if you have not already done so. Spend the time now
strengthening your **Programming Foundation**.



# Submitting

Files to Submit:

You will submit only _Schedule.cpp_.

Note that your submitted code must compile correctly--on our Linux
machines--with the other code in that directory, using the compilation commands
generated by the provided makefile. Do not alter any of the other source code
files, nor change the Scheduler interface in such a way that it can only be
compiled with some other compiler or some other sequence of commands.

To submit your assignment, use the button below. You will receive a
preliminary grade via email (to your ODU email account) and will also
be able to check your grade from the course web page *Grades* button.
This preliminary grade report will include any compilation errors
encountered when compiling your code.

\submitButton{@websiteBase@/@sem@/Assts/registration_llist/registration_llist.ini}
